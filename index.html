<html>

    <head>
        
        <title>Universum 360 Web</title>
        <script src="aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-template-component@3.x.x/dist/aframe-template-component.min.js"></script>
        <script src="https://unpkg.com/aframe-layout-component@4.x.x/dist/aframe-layout-component.min.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
        <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="style.css">

        <script id="tag" type="text/html">
            <a-entity class="link"
                geometry="primitive: circle"
                material="shader: flat; src: #dot"
                sound="on: click; src: #click-sound"                
                event-set__mouseenter="scale: 1.2 1.2 1"
                event-set__mouseleave="scale: 1 1 1"
                event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
                proxy-event="event: click; to: #image-360; as: fade"
            >
            </a-entity>
        </script>
    
    </head>

    <body>
        <a-scene>
            <a-assets>
                <!-- Images. -->
                <img id="dot" src="images/dot.png">
                <img id="uni00" src="images/0.jpg">
                <img id="uni01" src="images/1.jpg">
                <img id="uni02" src="images/2.jpg">
                <img id="uni03" src="images/3.jpg">
                <img id="uni04" src="images/4.jpg">
                <img id="uni05" src="images/5.jpg">
                <img id="uni06" src="images/6.jpg">
                <img id="uni07" src="images/7.jpg">
                <img id="uni08" src="images/8.jpg">
                <img id="uni09" src="images/9.jpg">
            </a-assets>
                 
            <a-sky 
                id="image-360" src="#uni01" rotation="0 -90 0"
                animation__fade="property: components.material.material.color; type: color; from: #FFF; to: #000; dur: 300; startEvents: fade"
                animation__fadeback="property: components.material.material.color; type: color; from: #000; to: #FFF; dur: 300; startEvents: animationcomplete__fade">
            </a-sky>       

            <a-entity class="links link-00 link-to-01" layout="type: line; margin: 3" position="-12 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni01"></a-entity>
            </a-entity>

            <a-entity class="links link-01 link-to-00" layout="type: line; margin: 3" position="9 -2 -4" rotation="-90 0 0" scale=".5 .5 .5">
                <a-entity template="src: #tag" data-src="#uni00"></a-entity>
            </a-entity>
            <a-entity class="links link-01 link-to-02" layout="type: line; margin: 3" position="-6 -2 -9" rotation="-90 0 0" scale=".5 .5 .5">
                <a-entity template="src: #tag" data-src="#uni02"></a-entity>
            </a-entity>

            <a-entity class="links link-02 link-to-01" layout="type: line; margin: 3" position="4 -2 11" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni01"></a-entity>
            </a-entity>
            <a-entity class="links link-02 link-to-03" layout="type: line; margin: 3" position="-2 -2 -7" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni03"></a-entity>
            </a-entity>

            <a-entity class="links link-03 link-to-02" layout="type: line; margin: 3" position="2 -2 9" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni02"></a-entity>
            </a-entity>
            <a-entity class="links link-03 link-to-04" layout="type: line; margin: 3" position="3 -2 -10" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni04"></a-entity>
            </a-entity>
         
            <a-entity class="links link-04 link-to-03" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni03"></a-entity>
            </a-entity>
            <a-entity class="links link-04 link-to-05" layout="type: line; margin: 3" position="-7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni05"></a-entity>
            </a-entity>
 
            <a-entity class="links link-05 link-to-04" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni04"></a-entity>
            </a-entity>
            <a-entity class="links link-05 link-to-06" layout="type: line; margin: 3" position="-7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni06"></a-entity>
            </a-entity>

            <a-entity class="links link-06 link-to-05" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni05"></a-entity>
            </a-entity>
            <a-entity class="links link-06 link-to-07" layout="type: line; margin: 3" position="-7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni07"></a-entity>
            </a-entity>

            <a-entity class="links link-07 link-to-06" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni06"></a-entity>
            </a-entity>
            <a-entity class="links link-07 link-to-08" layout="type: line; margin: 3" position="-7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni08"></a-entity>
            </a-entity>

            <a-entity class="links link-08 link-to-07" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni07"></a-entity>
            </a-entity>
            <a-entity class="links link-08 link-to-09" layout="type: line; margin: 3" position="-7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni09"></a-entity>
            </a-entity>

            <a-entity class="links link-09 link-to-08" layout="type: line; margin: 3" position="7 -2 2" rotation="-90 0 0" scale="0 0 0">
                <a-entity template="src: #tag" data-src="#uni08"></a-entity>
            </a-entity> 

            <a-camera>
                <a-cursor
                    id="cursor"
                    animation__click="property: scale; from: 0.1 0.1 0.1; to: 1 1 1; easing: easeInCubic; dur: 150; startEvents: click"
                    animation__clickreset="property: scale; to: 1 1 1; dur: 1; startEvents: animationcomplete__click"
                    animation__fusing="property: scale; from: 1 1 1; to: 0.1 0.1 0.1; easing: easeInCubic; dur: 150; startEvents: fusing"
                    event-set__mouseenter="_event: mouseenter; color: springgreen"
                    event-set__mouseleave="_event: mouseleave; color: black"
                    raycaster="objects: .link">
                </a-cursor>
            </a-camera>

        </a-scene>        
    </body>

    <script type="text/javascript">

        var scene = document.querySelector('a-scene');
        var sky = document.querySelector('a-sky');

        $(".links").click(function(event) { 

            var linkClicked = this;
            var classList = linkClicked.className.split(/\s+/);

            console.log(classList[1]);
            console.log(classList[2]);

            var classToEnable = classList[2].substr(0,4) + classList[2].substr(7,9);

            console.log(classToEnable);

            var elementsToDisable = document.getElementsByClassName(classList[1]);
            var elementsToEnable = document.getElementsByClassName(classToEnable);

            console.log(elementsToDisable);
            console.log(classToEnable);
            
            for (var i = 0, len = elementsToDisable.length; i < len; i++) { 
                var object3D = elementsToDisable[i].object3D;                
                object3D.scale.set(0,0,0);
            };

            for (var i = 0, len = elementsToEnable.length; i < len; i++) { 
                var object3D = elementsToEnable[i].object3D;
                object3D.scale.set(.5,.5,.5);
            };          
        });
 
    </script>
</html>